!function(){function e(){return document.querySelector("#matrix-a").checked?d:c}function t(e,r){switch(e){case"normal":h.style.borderLeft="333px solid #bcbcbc",q.style.display="none",S.style.display="none",R.style.display="none";break;case"error":if(t("normal"),h.style.borderLeft="333px solid #f6c1c0","wrong-value"===r){S.style.display="block";break}if("missing-values"===r){R.style.display="block";break}"wrong-size"===r&&(q.style.display="block");break;case"editing":t("normal"),h.style.borderLeft="333px solid #5199db"}}function r(){if(d.getColumnsNumber()!==c.getRowsNumber())return void t("error","wrong-size");for(var e=0;e<m.getRowsNumber();e++)for(var r=0;r<m.getColumnsNumber();r++){for(var o=0,n=0;n<c.getRowsNumber();n++)o+=d.getElement(e,n).value*c.getElement(n,r).value;m.getElement(e,r).value=o}}function o(e){m.clear(),""===e.value?(t("normal"),e.classList.remove("matrix__cell_filled")):e.value>10||e.value<-10||!e.value.trim().match(/^(-)?[0-9]+(\.[0-9]+)?$/)?(t("error","wrong-value"),e.value="",e.classList.remove("matrix__cell_filled"),setTimeout(function(){e.focus()},10)):(t("normal"),e.classList.add("matrix__cell_filled"))}function n(o){var n=e();if(o.classList.contains("button")&&t("normal"),o===y.node){if(10===n.getRowsNumber())return;return n.addRow(),n===d&&m.addRow(),void l()}if(o===N.node){if(10===n.getColumnsNumber())return;return n.addColumn(),n===c&&m.addColumn(),void l()}if(o===_.node){if(2===n.getRowsNumber())return;return n.removeRow(),n===d&&m.removeRow(),void l()}if(o===C.node){if(2===n.getColumnsNumber())return;return n.removeColumn(),n===c&&m.removeColumn(),void l()}return o===g.node?void i():o===w.node?(d.clear(),c.clear(),void m.clear()):o===f.node?void(d.isFilled()&&c.isFilled()?r():t("error","missing-values")):void(o.parentNode===p&&(l(),t("normal")))}function i(){var e=v.querySelector(".matrix1-container"),t=v.querySelector(".matrix2-container");v.insertBefore(t,e),e.className="matrix2-container",t.className="matrix1-container";var r=d.node.className;d.node.className=c.node.className,c.node.className=r}function l(){m.clear();var t=e();t.getRowsNumber()<10?y.enable():y.disable(),t.getColumnsNumber()<10?N.enable():N.disable(),t.getRowsNumber()>2?_.enable():_.disable(),t.getColumnsNumber()>2?C.enable():C.disable()}function s(e,t){this.node=t,this.name=e,this.rows=t.querySelector(".matrix__rows"),this.getRowsNumber=function(){return this.rows.children.length},this.getColumnsNumber=function(){return this.rows.children[0].children.length},this.getElement=function(e,t){return this.rows.children[e].children[t]},this.addRow=function(e){for(e=void 0===e?1:e;e>0;){for(var t=document.createElement("div"),r=this.getRowsNumber()+1,o=1;o<=this.getColumnsNumber();o++){var n=o,i=this.getElement(0,0).cloneNode();i.classList.remove("matrix__cell_filled"),i.value="",i.setAttribute("placeholder",this.name+r+","+n),t.appendChild(i)}this.rows.appendChild(t),this.setBrackets(),e--}},this.addColumn=function(e){for(e=void 0===e?1:e;e>0;){for(var t=this.getColumnsNumber()+1,r=0;r<this.getRowsNumber();r++){var o=this.rows.children[r],n=r+1,i=this.getElement(0,0).cloneNode();i.classList.remove("matrix__cell_filled"),i.value="",i.setAttribute("placeholder",this.name+n+","+t),o.appendChild(i)}this.setBrackets(),e--}},this.removeRow=function(e){for(e=void 0===e?1:e;e>0;)this.rows.removeChild(this.rows.lastChild),this.setBrackets(),e--},this.removeColumn=function(e){for(e=void 0===e?1:e;e>0;){for(var t=0;t<this.getRowsNumber();t++){var r=this.rows.children[t];r.removeChild(r.lastChild)}this.setBrackets(),e--}},this.setBrackets=function(){var e=document.querySelector(".bracket_disabled"),t=10+50*this.getRowsNumber(),r=e.cloneNode(!0);r.setAttribute("class","matrix__bracket"),r.setAttribute("height",10+50*this.getRowsNumber()),r.childNodes[3].setAttribute("y2",t-1),r.childNodes[5].setAttribute("y1",t-1),r.childNodes[5].setAttribute("y2",t-1);var o=r.cloneNode(!0);o.childNodes[3].setAttribute("x1",9),o.childNodes[3].setAttribute("x2",9),this.node.replaceChild(r,this.node.childNodes[1]),this.node.replaceChild(o,this.node.childNodes[5])},this.isFilled=function(){var e=this.getRowsNumber()*this.getColumnsNumber();return this.node.querySelectorAll(".matrix__cell_filled").length===e},this.clear=function(){for(var e=0;e<this.getRowsNumber();e++)for(var t=0;t<this.getColumnsNumber();t++)this.getElement(e,t).value=""}}function u(e){this.node=e,this.enable=function(){this.node.querySelector(".button__input").removeAttribute("disabled"),this.node.querySelector(".button__icon").classList.remove("button__icon_disabled")},this.disable=function(){this.node.querySelector(".button__input").setAttribute("disabled",""),this.node.querySelector(".button__icon").classList.add("button__icon_disabled")}}function a(){d.addColumn(),d.addRow(3),c.addColumn(2),c.addRow(),m.addRow(3),m.addColumn(2),l()}var d=new s("a",document.querySelector(".matrix1")),c=new s("b",document.querySelector(".matrix2")),m=new s("c",document.querySelector(".result-matrix")),h=document.querySelector("body"),b=document.querySelector(".controls"),v=document.querySelector(".matrices-form"),f=new u(document.querySelector("#multiply-btn")),w=new u(document.querySelector("#clear-btn")),g=new u(document.querySelector("#swap-btn")),y=new u(document.querySelector("#add-row-btn")),N=new u(document.querySelector("#add-column-btn")),_=new u(document.querySelector("#remove-row-btn")),C=new u(document.querySelector("#remove-column-btn")),p=b.querySelector(".radio-group"),q=b.querySelector(".wrong-size-warning"),S=b.querySelector(".wrong-value-warning"),R=b.querySelector(".missing-values-warning");a(),b.addEventListener("click",function(e){n(e.target.parentNode)}),v.addEventListener("input",function(e){""!==e.target.value&&t("editing")}),v.addEventListener("change",function(e){o(e.target)})}();